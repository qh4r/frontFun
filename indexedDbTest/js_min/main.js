define(["domReady","bootstrap"],function(e){function o(e){var o={name:n.nameField.val(),surname:n.surnameField.val(),email:n.emailField.val()},t=e.transaction(["customers"],"readwrite"),s=t.objectStore("customers"),a=s.add(o);a.onsuccess=function(e){setTimeout(function(){window.location.href="index.html"},500)},a.onerror=function(e){console.log("Error: ",e),n.addAlert.addClass("visible"),setTimeout(function(){n.addAlert.removeClass("visible")},3e3),console.log("end err")}}function t(e){var o=e.transaction(["customers"],"readonly"),t=o.objectStore("customers"),s=t.index("names"),a="";console.log("out -> ",a),s.openCursor().onsuccess=function(e){var o=e.target.result;console.log(o),o&&(a+="<tr><td>"+o.value.id+"</td><td><span>"+o.value.name+"</span></td><td><span>"+o.value.surname+"</span></td><td>"+o.value.email+"</td><td><a href=''>USUN</a></td></tr>",o["continue"]()),console.log("out -> ",a),n.customersList.html(a)}}e(function(){var e,n=window.indexedDB.open("customers",8);n.onupgradeneeded=function(o){var t;e=o.target.result,console.log(e),e.objectStoreNames.contains("customers")||(t=e.createObjectStore("customers",{keyPath:"id",autoIncrement:!0}),t.createIndex("names","name",{unique:!1}))},n.onsuccess=function(o){console.log("polaczono",o),e=o.target.result,t(e)},n.onerror=function(e){console.log("blad: ",e)},$("#new-customer-form").on("submit",function(t){t.preventDefault(),o(e)}),console.log("dziala")});var n={nameField:$("#customerName"),surnameField:$("#customerSurname"),emailField:$("#customerMail"),addAlert:$("#add-alert"),customersList:$("#customers-list")}});