define(["domReady","jquery"],function(t){function o(t,o){o.toggleClass("hide"),t.toggleClass("hide")}function e(t,o){t.removeClass("hide"),o.addClass("hide")}function i(t,o,e){var i=0;o.text("0:00"),e.css("width","0%"),t.addEventListener("timeupdate",function(n){var a=parseInt(t.currentTime%60),u=parseInt(t.currentTime/60)%60;a=10>a?"0"+a:a,o.text(u+":"+a),t.currentTime>0&&(i=Math.floor(100/t.duration*t.currentTime)),e.css("width",i+"%")})}function n(t,o,e,i,n){var a=t.innerText&&t.innerText,u=(t.getAttribute("data-song"),t.getAttribute("data-source")),r=t.getAttribute("data-cover"),s=t.getAttribute("data-artist");n=t,t.className="active",o.innerText=a,e.innerText=s,i.setAttribute("src",r);var l=new Audio(u);return{audio:l,current:n}}function a(t){function a(o){console.log(o);var e=audio.paused;t.playlist.removeClass("active"),audio.pause();var a=n(o,t.title,t.artist,t.cover,u);u=a.current,audio=a.audio,i(audio,t.duration,t.progress),e||audio.play()}var u={},r=n(t.playlist[0]||{},t.title,t.artist,t.cover,u);u=r.current,audio=r.audio,t.playlist.on("click",function(){a(this)}),t.nextButton.on("click",function(){var o=$(u).next();o&&o.length||(o=t.playlist),a(o[0])}),t.previousButton.on("click",function(){var o=$(u).prev();o&&o.length||(o=t.playlist),a(o[o.length-1])}),t.playButton.on("click",function(){audio.play(),o(t.playButton,t.pauseButton)}),t.pauseButton.on("click",function(){audio.pause(),o(t.playButton,t.pauseButton)}),t.stopButton.on("click",function(){audio.pause(),audio.currentTime=0,e(t.playButton,t.pauseButton)}),t.volumeBar.on("change",function(){audio.volume=parseFloat(this.value/40)}),i(audio,t.duration,t.progress),console.log("dziala")}t(function(){var t={playButton:$("#play"),nextButton:$("#next"),previousButton:$("#previous"),pauseButton:$("#pause"),stopButton:$("#stop"),volumeBar:$("#volume"),duration:$("#duration"),progress:$("#progress"),playlist:$("#playlist li"),cover:$("#audio-image img")[0]};t.audioInfo=$("#audio-info"),t.artist=$(t.audioInfo).find(".artist")[0],t.title=$(t.audioInfo).find(".title")[0],console.log(t),a(t)})});