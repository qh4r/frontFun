define(["domReady","./addButton","./note"],function(e,a,u){e(function(){var s=function(e){if(e.openDatabase){var t=e.openDatabase("noteTest2","1.0","notes test db one",10485760,function(e){console.log("db -> ",e)});if(!t)throw new Error("db not accessible");return t}throw new Error("db not supported")}(window);function o(){s.transaction(function(e){e.executeSql("SELECT id, note, timestamp, left, top, zindex, color FROM MyNotes",[],function(e,t){for(var o=[],n=0;n<t.rows.length;n++){var i=t.rows.item(n),c=new u(document.body,s,i.left,i.top,i.zindex,i.color,i.id);c.text=i.note||"",c.timestamp=i.timestamp,o.push(c)}document.addEventListener("contextmenu",function(e){e.preventDefault();new a(document.body,s,e.x,e.y,o)})},function(e,t){console.log("ERROR --\x3e ",t.message)})})}s.transaction(function(e){e.executeSql("SELECT COUNT(*) FROM MyNotes",[],function(e){o()},function(e,t){console.log("ERROR --\x3e ",t.message),e.executeSql("CREATE TABLE MyNotes (id REAL UNIQUE, note TEXT, timestamp REAL, left TEXT, top TEXT, zindex REAL, color TEXT)",[],function(e){o()},function(e,t){console.log("ERROR --\x3e ",t.message)})})})})});