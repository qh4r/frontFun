define(["domReady","./addButton","./note"],function(t,e,n){t(function(){function t(){i.transaction(function(t){t.executeSql("SELECT COUNT(*) FROM MyNotes",[],function(t){o()},function(t,e){console.log("ERROR --> ",e.message),t.executeSql("CREATE TABLE MyNotes (id REAL UNIQUE, note TEXT, timestamp REAL, left TEXT, top TEXT, zindex REAL, color TEXT)",[],function(t){o()},function(t,e){console.log("ERROR --> ",e.message)})})})}function o(){i.transaction(function(t){t.executeSql("SELECT id, note, timestamp, left, top, zindex, color FROM MyNotes",[],function(t,o){for(var c=[],s=0;s<o.rows.length;s++){var u=o.rows.item(s),a=new n(document.body,i,u.left,u.top,u.zindex,u.color,u.id);a.text=u.note||"",a.timestamp=u.timestamp,c.push(a)}document.addEventListener("contextmenu",function(t){t.preventDefault();new e(document.body,i,t.x,t.y,c)})},function(t,e){console.log("ERROR --> ",e.message)})})}var i=function(t){function e(t){console.log("db -> ",t)}if(t.openDatabase){var n=t.openDatabase("noteTest2","1.0","notes test db one",10485760,e);if(!n)throw new Error("db not accessible");return n}throw new Error("db not supported")}(window);t()})});