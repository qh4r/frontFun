define(["domReady","jquery"],function(t){function e(t){i=t,document.getElementById("startLatitude").innerHTML=i.coords.latitude,document.getElementById("startLongitude").innerHTML=i.coords.longitude}function n(t){document.getElementById("currentLatitude").innerHTML=t.coords.latitude,document.getElementById("currentLongitude").innerHTML=t.coords.longitude,document.getElementById("distance").innerHTML=a(i.coords.latitude,i.coords.longitude,t.coords.latitude,t.coords.longitude)}function o(t){switch(t.code){case t.PERMISSION_DENIED:alert("Odmówiono uprawnień");break;case t.POSITION_UNAVAILABLE:alert("Lokalizacja nieosiągalna");break;case t.TIMEOUT:alert("timeout....");break;case t.UNKNOWN_ERROR:alert("nieznany błąd")}}function a(t,e,n,o){var a=6371,i=(n-t).toRad(),c=(o-e).toRad(),d=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t.toRad())*Math.cos(n.toRad())*Math.sin(c/2)*Math.sin(c/2),r=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),s=a*r;return s}t(function(){$("#startBtn").on("click",function(){navigator.geolocation?(document.getElementById("stopBtn").className="",document.getElementById("startBtn").className="hide",navigator.geolocation.getCurrentPosition(e,o),c=navigator.geolocation.watchPosition(n,o)):alert("Geolokacja nies jest wspierana")}),$("#stopBtn").on("click",function(){navigator.geolocation.clearWatch(c),document.getElementById("stopBtn").className="hide",document.getElementById("startBtn").className=""})});var i,c;Number.prototype.toRad=function(){return this*Math.PI/180}});